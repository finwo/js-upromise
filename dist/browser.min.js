!function(e){if("undefined"!==module&&"undefined"!==module.exports)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof window)window.EE=e();else{if("undefined"==typeof global)throw new Error("Could not initialize UPromise");global.EE=e()}}(function(){var e,r,t,o,n,i,s,c,a,u,_,f,p,d,l,v,x=(v={m:(l={exports:void 0,exports:function(n){return function(e){return new n(function(t,r){var o=!1;e.forEach(function(e){n.resolve().then(e).then(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,r(e))})})})}}},l.exports),jv:(d={exports:void 0,exports:function(r){return function(e){var t=r.resolve();return e.forEach(function(e){t=t.then(e)}),t}}},d.exports),s:(u={exports:void 0},_=x("j"),f=x("k"),p=x("5"),u.exports=function(n){return function(e,t){var r=Object.assign(Object.create(n.prototype),_,{__state:"waiting"}),o=this;return o.__stack.push({resolve:e||f,reject:t||f}),o.__stack.push({prom:r}),"resolved"===o.__state?setTimeout(p.resolve.bind(o,o.__data),0):"rejected"===o.__state&&setTimeout(p.reject.bind(o,o.__error),0),r}},u.exports),5:function(){var e={exports:void 0},n=x("b");e.exports={resolve:function(e){var t=this;if(t.__state="waiting"===t.__state?"pending":t.__state,"object"!=typeof e||"function"!=typeof e.then){var r=t.__stack.shift();if(!r)return t.__state="resolved",void(t.__data=e);if("object"==typeof r.prom&&"function"==typeof r.prom.then)return r.prom.then(i.bind(t),s.bind(t)),void("upromise"===n(r.prom)&&"waiting"===r.prom.__state&&i.call(r.prom,e));if("function"==typeof r.resolve){try{var o=r.resolve(e);if(!t.__stack.length)return t.__state="resolved",void(t.__data=o);i.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);s.call(t,e)}t.__state="resolved",t.__data=e}else i.call(t,r.resolve)}else e.then(i.bind(t),s.bind(t))},reject:function(e){var t=this,r={};for(t.__state="waiting"===t.__state?"pending":t.__state;r&&!r.reject;)r=t.__stack.shift();if(!r)throw new Error("Uncaught Promise rejection:"+e);try{var o=r.reject(e);if(!t.__stack.length)return t.__state="rejected",t.__data=o,void(t.__error=e);i.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);s.call(t,e)}t.__state="rejected",t.__error=e}};var i=e.exports.resolve,s=e.exports.reject;return e.exports}(),b:(a={exports:void 0,exports:function(e){switch(typeof e){case"string":return"string";case"boolean":return"boolean";case"undefined":return"undefined";case"number":return"number";case"object":return null===e?null:e&&e.constructor&&"UPromise"===e.constructor.name?"upromise":e&&"function"==typeof e.next?"generator":e&&"function"==typeof e.then?"promise":Array.isArray(e)?"array":"object";case"function":return"GeneratorFunction"===Object.getPrototypeOf(e).constructor.name?"generator-function":"function";default:return"unknown"}}},a.exports),k:(c={exports:void 0,exports:function(e){return e}},c.exports),j:(s={exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}},s.exports),y:(n={exports:void 0},i=x("k"),n.exports=function(e){return this.then(i,e)},n.exports),n:(t={exports:void 0},o=x("j"),t.exports=function(t){return function(e){return Object.assign(Object.create(t.prototype),o,{__state:"rejected",__error:e})}},t.exports),d:(e={exports:void 0},r=x("j"),e.exports=function(t){return function(e){return e&&"function"==typeof e.then?e:Object.assign(Object.create(t.prototype),r,{__state:"resolved",__data:e})}},e.exports)},function(e){return e in v?v[e]:void 0});return function(){var e={exports:void 0},r=x("j"),o=x("5");function t(e){var t=this;if(Object.assign(this,r),"function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");try{e(o.resolve.bind(t),o.reject.bind(t))}catch(e){o.reject.call(t,e)}}return t.resolve=x("d")(t),t.reject=x("n")(t),t.prototype.catch=x("y"),t.prototype.then=x("s")(t),t.all=x("jv")(t),t.race=x("m")(t),t.prototype.name="UPromise",e.exports=t,e.exports}()});
