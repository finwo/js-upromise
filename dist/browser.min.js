!function(e){if("undefined"!==module&&"undefined"!==module.exports)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof window)window.EE=e();else{if("undefined"==typeof global)throw new Error("Could not initialize UPromise");global.EE=e()}}(function(){return function(){var e,r,t,o,n,s,i,a,c,_,u={exports:void 0},p={exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}}.exports,d=function(){var e={exports:void 0},n={exports:void 0,exports:function(e){switch(typeof e){case"string":return"string";case"boolean":return"boolean";case"undefined":return"undefined";case"number":return"number";case"object":return null===e?null:e&&e.constructor&&"UPromise"===e.constructor.name?"upromise":e&&"function"==typeof e.next?"generator":e&&"function"==typeof e.then?"promise":Array.isArray(e)?"array":"object";case"function":return"GeneratorFunction"===Object.getPrototypeOf(e).constructor.name?"generator-function":"function";default:return"unknown"}}}.exports;e.exports={resolve:function(e){var t=this;if(t.__state="waiting"===t.__state?"pending":t.__state,"object"!=typeof e||"function"!=typeof e.then){var r=t.__stack.shift();if(!r)return t.__state="resolved",void(t.__data=e);if("object"==typeof r.prom&&"function"==typeof r.prom.then)return r.prom.then(s.bind(t),i.bind(t)),void("upromise"===n(r.prom)&&"waiting"===r.prom.__state&&s.call(r.prom,e));if("function"==typeof r.resolve){try{var o=r.resolve(e);if(!t.__stack.length)return t.__state="resolved",void(t.__data=o);s.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="resolved",t.__data=e}else s.call(t,r.resolve)}else e.then(s.bind(t),i.bind(t))},reject:function(e){var t=this,r={};for(t.__state="waiting"===t.__state?"pending":t.__state;r&&!r.reject;)r=t.__stack.shift();if(!r)throw new Error("Uncaught Promise rejection:"+e);try{var o=r.reject(e);if(!t.__stack.length)return t.__state="rejected",t.__data=o,void(t.__error=e);s.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="rejected",t.__error=e}};var s=e.exports.resolve,i=e.exports.reject;return e.exports}();function f(e){var t=this;if(Object.assign(this,p),"function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");try{e(d.resolve.bind(t),d.reject.bind(t))}catch(e){d.reject.call(t,e)}}return f.resolve=(r={exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}}.exports,(e={exports:void 0}).exports=function(t){return function(e){return e&&"function"==typeof e.then?e:Object.assign(Object.create(t.prototype),r,{__state:"resolved",__data:e})}},e.exports)(f),f.reject=(o={exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}}.exports,(t={exports:void 0}).exports=function(t){return function(e){return Object.assign(Object.create(t.prototype),o,{__state:"rejected",__error:e})}},t.exports)(f),f.prototype.catch=(s={exports:void 0,exports:function(e){return e}}.exports,(n={exports:void 0}).exports=function(e){return this.then(s,e)},n.exports),f.prototype.then=(i={exports:void 0},a={exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}}.exports,c={exports:void 0,exports:function(e){return e}}.exports,_=function(){var e={exports:void 0},n={exports:void 0,exports:function(e){switch(typeof e){case"string":return"string";case"boolean":return"boolean";case"undefined":return"undefined";case"number":return"number";case"object":return null===e?null:e&&e.constructor&&"UPromise"===e.constructor.name?"upromise":e&&"function"==typeof e.next?"generator":e&&"function"==typeof e.then?"promise":Array.isArray(e)?"array":"object";case"function":return"GeneratorFunction"===Object.getPrototypeOf(e).constructor.name?"generator-function":"function";default:return"unknown"}}}.exports;e.exports={resolve:function(e){var t=this;if(t.__state="waiting"===t.__state?"pending":t.__state,"object"!=typeof e||"function"!=typeof e.then){var r=t.__stack.shift();if(!r)return t.__state="resolved",void(t.__data=e);if("object"==typeof r.prom&&"function"==typeof r.prom.then)return r.prom.then(s.bind(t),i.bind(t)),void("upromise"===n(r.prom)&&"waiting"===r.prom.__state&&s.call(r.prom,e));if("function"==typeof r.resolve){try{var o=r.resolve(e);if(!t.__stack.length)return t.__state="resolved",void(t.__data=o);s.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="resolved",t.__data=e}else s.call(t,r.resolve)}else e.then(s.bind(t),i.bind(t))},reject:function(e){var t=this,r={};for(t.__state="waiting"===t.__state?"pending":t.__state;r&&!r.reject;)r=t.__stack.shift();if(!r)throw new Error("Uncaught Promise rejection:"+e);try{var o=r.reject(e);if(!t.__stack.length)return t.__state="rejected",t.__data=o,void(t.__error=e);s.call(t,o)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="rejected",t.__error=e}};var s=e.exports.resolve,i=e.exports.reject;return e.exports}(),i.exports=function(n){return function(e,t){var r=Object.assign(Object.create(n.prototype),a,{__state:"waiting"}),o=this;return o.__stack.push({resolve:e||c,reject:t||c}),o.__stack.push({prom:r}),"resolved"===o.__state?setTimeout(_.resolve.bind(o,o.__data),0):"rejected"===o.__state&&setTimeout(_.reject.bind(o,o.__error),0),r}},i.exports)(f),f.all={exports:void 0,exports:function(r){return function(e){var t=r.resolve();return e.forEach(function(e){t=t.then(e)}),t}}}.exports(f),f.race={exports:void 0,exports:function(n){return function(e){return new n(function(t,r){var o=!1;e.forEach(function(e){n.resolve().then(e).then(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,r(e))})})})}}}.exports(f),f.prototype.name="UPromise",u.exports=f,u.exports}()});
