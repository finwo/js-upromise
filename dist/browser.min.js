!function(e){if("undefined"!==module&&"undefined"!==module.exports)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof window)window.EE=e();else{if("undefined"==typeof global)throw new Error("Could not initialize UPromise");global.EE=e()}}(function(){function f(e){switch(e){case"1g":return{exports:void 0,exports:function(o){return function(e){return new o(function(t,r){var n=!1;e.forEach(function(e){o.resolve().then(e).then(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,r(e))})})})}}}.exports;case"s2":return{exports:void 0,exports:function(r){return function(e){var t=r.resolve();return e.forEach(function(e){t=t.then(e)}),t}}}.exports;case"1":return c={exports:void 0},a=f("y"),u=f("s"),_=f("b"),c.exports=function(o){return function(e,t){var r=Object.assign(Object.create(o.prototype),a,{__state:"waiting"}),n=this;return n.__stack.push({resolve:e||u,reject:t||u}),n.__stack.push({prom:r}),"resolved"===n.__state?setTimeout(_.resolve.bind(n,n.__data),0):"rejected"===n.__state&&setTimeout(_.reject.bind(n,n.__error),0),r}},c.exports;case"b":return function(){var e={exports:void 0},o=f("x");e.exports={resolve:function(e){var t=this;if(t.__state="waiting"===t.__state?"pending":t.__state,"object"!=typeof e||"function"!=typeof e.then){var r=t.__stack.shift();if(!r)return t.__state="resolved",void(t.__data=e);if("object"==typeof r.prom&&"function"==typeof r.prom.then)return r.prom.then(s.bind(t),i.bind(t)),void("upromise"===o(r.prom)&&"waiting"===r.prom.__state&&s.call(r.prom,e));if("function"==typeof r.resolve){try{var n=r.resolve(e);if(!t.__stack.length)return t.__state="resolved",void(t.__data=n);s.call(t,n)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="resolved",t.__data=e}else s.call(t,r.resolve)}else e.then(s.bind(t),i.bind(t))},reject:function(e){var t=this,r={};for(t.__state="waiting"===t.__state?"pending":t.__state;r&&!r.reject;)r=t.__stack.shift();if(!r)throw new Error("Uncaught Promise rejection:"+e);try{var n=r.reject(e);if(!t.__stack.length)return t.__state="rejected",t.__data=n,void(t.__error=e);s.call(t,n)}catch(e){if(!t.__stack.length)return t.__state="rejected",void(t.__error=e);i.call(t,e)}t.__state="rejected",t.__error=e}};var s=e.exports.resolve,i=e.exports.reject;return e.exports}();case"x":return{exports:void 0,exports:function(e){switch(typeof e){case"string":return"string";case"boolean":return"boolean";case"undefined":return"undefined";case"number":return"number";case"object":return null===e?null:e&&e.constructor&&"UPromise"===e.constructor.name?"upromise":e&&"function"==typeof e.next?"generator":e&&"function"==typeof e.then?"promise":Array.isArray(e)?"array":"object";case"function":return"GeneratorFunction"===Object.getPrototypeOf(e).constructor.name?"generator-function":"function";default:return"unknown"}}}.exports;case"s":return{exports:void 0,exports:function(e){return e}}.exports;case"y":return{exports:void 0,exports:{__state:"pending",__stack:[],__data:void 0,__error:void 0}}.exports;case"w":return s={exports:void 0},i=f("s"),s.exports=function(e){return this.then(i,e)},s.exports;case"yc":return n={exports:void 0},o=f("y"),n.exports=function(t){return function(e){return Object.assign(Object.create(t.prototype),o,{__state:"rejected",__error:e})}},n.exports;case"q":return t={exports:void 0},r=f("y"),t.exports=function(t){return function(e){return e&&"function"==typeof e.then?e:Object.assign(Object.create(t.prototype),r,{__state:"resolved",__data:e})}},t.exports;default:return}var t,r,n,o,s,i,c,a,u,_}return function(){var e={exports:void 0},r=f("y"),n=f("b");function t(e){var t=this;if(Object.assign(this,r),"function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");try{e(n.resolve.bind(t),n.reject.bind(t))}catch(e){n.reject.call(t,e)}}return t.resolve=f("q")(t),t.reject=f("yc")(t),t.prototype.catch=f("w"),t.prototype.then=f("1")(t),t.all=f("s2")(t),t.race=f("1g")(t),t.prototype.name="UPromise",e.exports=t,e.exports}()});
